(this["webpackJsonpreact-antd-admin"]=this["webpackJsonpreact-antd-admin"]||[]).push([[15],{1025:function(e,n,t){},1090:function(e,n,t){"use strict";t.r(n);var i=t(21),a=t(34),c=(t(1025),t(0)),o=t.n(c),r=t(549),l=t(48),d=t(412),u=t(157),s=t(269),b=t(6),f={time:{id:"time",name:"Time",width:100,className:"text-small",form:{type:"date-picker",rules:[{required:!0,message:"Ch\u01b0a nh\u1eadp"}]}},getTableColumns:function(){return[b.constants.stt,this.time,b.constants.active,b.constants.editRow]},getInputFields:function(){return[this.time]}},m=t(439),v=t(201),O=t(780),j=t(15),h=t(415),p=t(419),g=t(790),C=t(10),D=t(302),y=t(17);function M(e,n){return function(t,i){var a=i().fingerprint.quetVanTays,c=n.onClick,o=e.children,r=e.contentClass,l=(null===a||void 0===a?void 0:a[null===e||void 0===e?void 0:e.id])||{},d=l.emps,u=void 0===d?[]:d,s=null===u||void 0===u?void 0:u.length,b=t(function(e,n){return function(t){return(e||[]).reduce((function(e,i){var a=t(I(null===i||void 0===i?void 0:i.nhanVienId,n)).isDiLam,c=((null===e||void 0===e?void 0:e.coDiLam)||0)+(a?1:0),o=((null===e||void 0===e?void 0:e.khongDiLam)||0)+(a?0:1);return Object(C.a)(Object(C.a)({},e),{},{coDiLam:c,khongDiLam:o})}),{})}}(u,n)),f=b.coDiLam,m=b.khongDiLam,v=t(function(e,n,t){return function(i,a){var c=a().fingerprint.xemGioVaoRa,o=n.isFullName,r=n.contentItemClass,l=void 0===r?"":r;return(e||[]).map((function(e,n){var a=(e||{}).nhanVienId,r=i(function(e,n){return function(t,i){var a=i().nhanSu.nhanSuDatas,c=((null===a||void 0===a?void 0:a[e])||{}).hoTen,o=void 0===c?"":c,r=o.split(" "),l=r.length;return n?o:(null===r||void 0===r?void 0:r[l-1])||"--"}}(a,o)),d=i(I(a,t)),u=d.gioVao,s=d.gioRa,b=d.isDiLam,f=d.color,m=d.textColor;return Object(y.c)("div",{className:l,style:{marginBottom:"2px"},children:[Object(y.b)("div",{children:Object(y.b)(D.a,{color:f,style:{width:"100%"},children:Object(y.b)("span",{style:{color:m},children:r})})}),c&&b&&Object(y.b)("div",{className:"text-center",children:Object(y.c)("small",{className:"font-weight-bold",children:[u," - ",s]})})]},a||n)}))}}(u,e,n));return Object(y.c)("li",{className:(null===e||void 0===e?void 0:e.liClass)||"",children:[Object(y.c)("div",{className:"title hoverClass",onClick:function(){return null===c||void 0===c?void 0:c(Object(C.a)(Object(C.a)({},e),l))},children:[Object(y.b)("div",{className:"font-weight-bold text-dark",children:(null===e||void 0===e?void 0:e.title)||""}),Object(y.b)("div",{className:r||"text-left",children:v}),Object(y.c)("div",{className:"text-center",children:["\u03a3",s,": ",f,m?Object(y.c)("span",{className:"mr-1 text-danger",children:[" + ",m]}):null]})]}),Array.isArray(o)&&Object(y.b)("ul",{children:o.map((function(e){return t(M(e,n))}))})]},null===e||void 0===e?void 0:e.id)}}function I(e,n){return function(t,i){var a,c,o=n.tongHopDiemDanhsNextMonth,r=n.selectedTime,l=n.fingerprintConfigIndex,d=i(),u=d.caLamViec.caLamViecId,s=d.fingerprint.tongHopDiemDanhDatasArray,b=null===s||void 0===s?void 0:s[l],f=r?"ngayQuet".concat(r.format("DD")):"",m=r?"ngayQuet".concat(r.clone().add(1,"day").format("DD")):"",v=(null===b||void 0===b||null===(a=b[e])||void 0===a?void 0:a[f])||{},O=(null===b||void 0===b||null===(c=b[e])||void 0===c?void 0:c[m])||{},j=v.gioVao,h=v.gioRa;if("caDem"===u){var p,g;O=r.clone().endOf("month").format("DD-MM-YYYY")===r.format("DD-MM-YYYY")?null===o||void 0===o||null===(p=o[e])||void 0===p?void 0:p[m]:O;var C=(j=(null===v||void 0===v?void 0:v.gioRa)||"").split(":"),D=Number((null===C||void 0===C?void 0:C[0])||0);(D=isNaN(D)?0:D)<10&&(j=null),h=null===(g=O)||void 0===g?void 0:g.gioVao}var y=j||h;return{gioVao:j,gioRa:h,color:y?"#88a5ff":"#cd201f",textColor:y?"#000000":"",isDiLam:y}}}var S=t(3),N=t.n(S),x=t(8),V=t(13),T=t(35),w=t(67),k=t(59),F=t(60),L=t(134),Y={getTableColumns:function(){return[b.constants.stt,F.b.maNV,F.b.hoTen,L.a.tenChucVu,b.constants.editRow]},getInputFields:function(){return[b.constants.stt,b.constants.id]},getExcelFields:function(){return[b.constants.stt,b.constants.active]}},R=t(413),B=t(453),E=t(852),P=t(800),A=u.d.fingerprintChiTietModal;var G=function(){var e=Object(l.b)(),n=r.a.useForm(),t=Object(a.a)(n,1)[0],i=Object(l.c)((function(e){return e.form})),c=i.modal,d=i.datas,u=o.a.useMemo((function(){var e;return!!(null===c||void 0===c||null===(e=c[A])||void 0===e?void 0:e.open)}),[c[A]]),s=null===d||void 0===d?void 0:d[A];function f(){return(f=Object(x.a)(N.a.mark((function n(){var i,a;return N.a.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=2,t.validateFields();case 2:i=n.sent,a=Object(b.convertMomentToString)(Y.getInputFields(),i),e(Object(B.c)({convertedData:a,nameOfId:"nhanSuId"})),e(Object(b.closeModal)({modalId:A}));case 6:case"end":return n.stop()}}),n)})))).apply(this,arguments)}return o.a.useEffect((function(){u?u&&s&&t.setFieldsValue(Object(C.a)(Object(C.a)({},s),{},{nhanSuId:s.id})):t.resetFields()}),[u,s]),Object(y.b)(b.MyModal,{title:Object(y.b)("div",{children:"Fingerprint"}),visible:u,onClose:function(){e(Object(b.closeModal)({modalId:A}))},onOkModal:function(){return f.apply(this,arguments)},width:900,modalId:A,datas:d,children:Object(y.c)(b.MyForm,{form:t,labelCol:{span:6},wrapperCol:{span:18},children:[Object(y.b)(E.a,{name:"id",label:"id",disabled:!0}),Object(y.b)(P.a,{})]})})},H=u.d.fingerprintChiTietModal;var q=function(e){var n=Object(l.b)(),t=Object(l.c)((function(e){return e.nhanSu})).nhanSus,i=Object(l.c)((function(e){return e.fingerprintChiTiet})).fingerprintChiTiets,a=o.a.useMemo((function(){return Object.values(i).map((function(e){return(null===t||void 0===t?void 0:t[e.id])||e}))}),[i,t]);return Object(y.c)("div",{className:"fingerprintChiTiet-page",css:s.a,children:[Object(y.b)("div",{style:{marginBottom:"7px"},children:Object(y.b)(w.a,{icon:Object(y.b)(k.a,{}),type:"primary",onClick:function(){n(Object(b.openModal)({modalId:H}))},children:"Th\xeam nh\xe2n s\u1ef1"})}),Object(y.b)(R.a,{isEdit:!0,constants:Y,onCallbackDataSource:function(e){return Object(b.onCallbackDataSource)("tenMatHang",e)},datas:a,modalId:H,isSelection:!1,pagination:!1,inputOptions:{onDeleteItem:function(e){n(Object(B.b)(e))}}}),Object(y.b)(G,{})]})},Q=u.d.fingerprintModal;var J=function(e){var n,t,i=Object(l.b)(),c=Object(l.c)((function(e){return e.form})),d=c.modal,u=c.datas,s=Object(l.c)((function(e){return e.account})).accountData,f=null===s||void 0===s||null===(n=s.paths)||void 0===n||null===(t=n.fingerprint)||void 0===t?void 0:t.edit,v=o.a.useMemo((function(){var e;return!!(null===d||void 0===d||null===(e=d[Q])||void 0===e?void 0:e.open)}),[d[Q]]),O=r.a.useForm(),j=Object(a.a)(O,1)[0],h=null===u||void 0===u?void 0:u[Q];return o.a.useEffect((function(){if(v){if(v&&h){var e=((null===h||void 0===h?void 0:h.emps)||[]).reduce((function(e,n){return Object(C.a)(Object(C.a)({},e),{},Object(V.a)({},n.nhanVienId,{id:n.nhanVienId,nhanSuId:n.nhanVienId}))}),{});i(Object(B.d)(e)),j.setFieldsValue(h)}}else j.resetFields()}),[v,h]),Object(y.b)(b.MyModal,{title:Object(y.c)("div",{children:["Fingerprint: ",null===h||void 0===h?void 0:h.title]}),visible:v,onClose:function(){i(Object(b.closeModal)({modalId:Q}))},onOkModal:function(){if(!f)return Object(T.h)();i(Object(b.onConfirmOk)(Object(x.a)(N.a.mark((function e(){return N.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:!0,i(Object(m.g)(h)),i(Object(b.closeModal)({modalId:Q}));case 3:case"end":return e.stop()}}),e)})))))},width:700,modalId:Q,datas:u,children:Object(y.b)(q,{})})};var K=function(e){var n=e.selectedTime,t=Object(l.b)(),i=Object(l.c)((function(e){return e.nhanSu})).nhanSuDatas,a=Object(l.c)((function(e){return e.fingerprint})),c=a.fingerprints,r=a.tongHopDiemDanhDatasArray,d=a.quetVanTays,s=a.xemGioVaoRa,f=c.xuongComBinhDuongConfig,m=c.vanTayNhanVienVanPhongConfig,v=c.vanTayQuayNuocConfig;function O(e){t(Object(b.openModal)({modalId:u.d.fingerprintModal,data:e}))}var j=o.a.useMemo((function(){return f?t(M(f,{fingerprintConfigIndex:0,selectedTime:n,onClick:O})):null}),[n,c,d,r,i,s]),h=o.a.useMemo((function(){return m?t(M(m,{fingerprintConfigIndex:0,selectedTime:n,onClick:O})):null}),[n,c,d,r,i,s]),p=o.a.useMemo((function(){return v?t(M(v,{fingerprintConfigIndex:0,selectedTime:n,onClick:O})):null}),[n,c,d,r,i,s]);return Object(y.c)("div",{children:[Object(y.b)("div",{className:"tree",children:Object(y.b)("ul",{children:j})}),Object(y.b)("div",{className:"tree",children:Object(y.b)("ul",{children:h})}),Object(y.b)("div",{className:"tree",children:Object(y.b)("ul",{children:p})}),Object(y.b)(J,{})]})},U=t(563),X=t(168),z=t(74),W=(Object(b.sortByText)("ngay"),b.numberRender,b.numberRender,b.numberRender,"http://api.osac.vn");var Z=function(e){var n=e.selectedTime,t=Object(l.b)(),i=Object(l.c)((function(e){return e.account})).isDev,a=Object(l.c)((function(e){return e.fingerprint})),c=a.loading,o=a.xemGioVaoRa;return Object(y.b)(y.a,{children:Object(y.b)(d.a,{header:Object(y.b)("div",{className:"font-weight-bold",children:"Th\xf4ng Tin Trang"}),body:Object(y.c)("div",{className:"form-input-aside",style:{padding:"5px"},children:[Object(y.b)("div",{style:{marginBottom:"7px"},children:Object(y.b)(w.a,{block:!0,icon:Object(y.b)(U.a,{}),onClick:function(){if(!n)return Object(b.thongBaoDaLoi)();t(Object(b.onConfirmOk)((function(){var e=n.format("YYYY-MM-DD"),i=n.clone().add(1,"day").format("YYYY-MM-DD"),a=n.format("MM-YY");t(function(e,n,t){return function(i){var a=["chamCong",e,n].join("/");console.log("".concat(W,"/").concat(a)),i(Object(m.e)(!0)),fetch("".concat(W,"/").concat(a)).then((function(){Object(b.thongBaoDaLuu)(),i(Object(m.c)(["xuongBinhDuong"],t))})).catch((function(e){console.log(e)})).finally((function(){i(Object(m.e)(!1))}))}}(e,i,a))})))},loading:c,children:"C\u1eadp nh\u1eadt v\xe2n tay nh\xe2n vi\xean"})}),Object(y.b)("div",{style:{marginBottom:"7px"},children:Object(y.c)(w.a,{block:!0,icon:Object(y.b)(X.a,{}),onClick:function(){t(Object(m.h)(!o))},type:o?"primary":"default",children:[o?"\u0110\xf3ng":"Xem"," gi\u1edd v\xe0o, gi\u1edd ra"]})}),i&&Object(y.b)("div",{children:Object(y.b)(w.a,{onClick:function(){t(Object(m.f)("xuongBinhDuong"))},children:"Update fingerprint config"})})]}),footer:Object(y.b)("div",{children:Object(y.b)(w.a,{icon:Object(y.b)(z.a,{}),onClick:function(){t(Object(b.toggleAside)({tagPageId:u.d.fingerprintModal}))},children:"\u0110\xf3ng m\u1edf r\u1ed9ng"})})})})},$=u.d.fingerprintModal;n.default=function(){var e=Object(l.b)(),n=r.a.useForm(),t=Object(a.a)(n,1)[0],c=Object(l.c)((function(e){var n;return null===(n=e.tagsPage)||void 0===n?void 0:n[$]})),u=Object(l.c)((function(e){return e.diaDiem})).diaDiemId,C=Object(l.c)((function(e){return e.caLamViec})).caLamViecId,D=Object(l.c)((function(e){return e.fingerprint})).tabsData,M=Object(b.useDatePicker)({}),I=Object(a.a)(M,2),S=I[0],N=I[1];var x=o.a.useMemo((function(){return[].concat(Object(i.a)(D||[]),[{label:Object(y.b)(r.a,{form:t,children:Object(y.b)(O.a,{style:{width:"180px"},isDanhSachNL:!0})}),value:"diaDiemSelect"},{label:N.getDayRender(),value:"daySelect"},{label:Object(y.b)(r.a,{form:t,children:Object(y.b)(g.a,{style:{width:110}})}),value:"caLamViecSelect"}])}),[S]);return o.a.useEffect((function(){return e(Object(m.d)(u)),function(){Object(j.l)("diaDiemId")}}),[u]),o.a.useEffect((function(){var n,t=null===S||void 0===S||null===(n=S.format)||void 0===n?void 0:n.call(S,"MM-YY");e(Object(m.c)(["xuongBinhDuong","xuongDauGiay","xuongCoKhi"],t))}),[S]),o.a.useEffect((function(){e(Object(m.b)(u,C))}),[u,C]),o.a.useEffect((function(){var n=localStorage.getItem("diaDiemId"),i=localStorage.getItem("caLamViecId");e(Object(h.a)(n)),e(Object(p.addSelectedId)(i)),t.setFieldsValue({diaDiemId:n,caLamViecId:i})}),[]),Object(y.c)("div",{className:"fingerprint-page",css:s.a,children:[Object(y.b)(d.b,{className:"tabs",options:x,activeKey:c?"aside":"",onTabClick:function(n){"taiExcel"===n?e(Object(v.b)({tableId:$,constants:f,fileSheet:"fingerprint",fileName:"fingerprint"})):"aside"===n&&e(Object(b.toggleAside)({tagPageId:$}))}}),Object(y.c)("div",{className:"tabs-main",style:{marginTop:"10px"},children:[c&&Object(y.b)(Z,{selectedTime:S}),Object(y.b)("div",{className:"over-flow-scroll",children:Object(y.b)(K,{selectedTime:S})})]})]})}},780:function(e,n,t){"use strict";var i=t(0),a=t.n(i),c=t(6),o=t(48),r=t(415),l=t(17);n.a=function(e){var n=e.form,t=e.name,i=e.mode,d=e.label,u=e.labelCol,s=e.wrapperCol,b=e.rules,f=e.onAfterSelect,m=e.disabled,v=e.isDanhSachNL,O=e.isDontStoreState,j=e.style,h=Object(o.b)(),p=Object(o.c)((function(e){return e.diaDiem})).diaDiems,g=a.a.useMemo((function(){var e=Object.values(p).filter((function(e){return e.active}));return v&&(e=e.filter((function(e){return e.danhSachNL}))),e.map((function(e){var n="".concat(e.tenDiaDiem);return{value:e.id,label:n}}))}),[p]);var C=Object(l.b)(c.MyFormItem,{label:null!==d&&void 0!==d?d:"\u0110\u1ecba \u0111i\u1ec3m",type:"select",name:null!==t&&void 0!==t?t:"diaDiemId",innerProps:{mode:i,showSearch:!0,allowClear:!0,filterOption:c.onSelectSearch,onChange:function(e){O||h(Object(r.a)(e)),null===f||void 0===f||f(e)},disabled:m,style:j},options:g,rules:null!==b&&void 0!==b?b:[]});return n?Object(l.b)(l.a,{children:Object(l.b)(c.MyForm,{form:n,labelCol:null!==u&&void 0!==u?u:{span:8},wrapperCol:null!==s&&void 0!==s?s:{span:16},children:C})}):Object(l.b)(l.a,{children:C})}},790:function(e,n,t){"use strict";var i=t(0),a=t.n(i),c=t(6),o=t(48),r=t(419),l=t(17);n.a=function(e){var n=e.form,t=e.style,i=Object(o.b)(),d=Object(o.c)((function(e){return e.caLamViec})).caLamViecs,u=a.a.useMemo((function(){return Object.values(d||{}).map((function(e){var n=e.tenCaLamViec;return{value:e.id,label:n}}))}),[d]);var s=Object(l.b)(c.MyFormItem,{label:"Ca L\xe0m Vi\u1ec7c",type:"select",name:"caLamViecId",innerProps:{style:t,showSearch:!0,allowClear:!0,filterOption:c.onSelectSearch,onChange:function(e){i(Object(r.addSelectedId)(e))}},options:u});return n?Object(l.b)(c.MyForm,{form:n,labelCol:{span:8},wrapperCol:{span:16},children:s}):s}},800:function(e,n,t){"use strict";var i=t(0),a=t.n(i),c=t(6),o=t(48),r=t(128),l=t(17);n.a=function(e){var n=e.form,t=e.mode,i=e.label,d=e.labelCol,u=e.wrapperCol,s=e.rules,b=Object(o.b)(),f=Object(o.c)((function(e){return e.nhanSu})).nhanSus,m=a.a.useMemo((function(){return Object.values(f).filter((function(e){return e.active})).map((function(e){var n="".concat(e.maNV," - ").concat(e.hoTen);return{value:e.id,label:n}}))}),[f]);var v=Object(l.b)(c.MyFormItem,{label:null!==i&&void 0!==i?i:"Nh\xe2n s\u1ef1",type:"select",name:"nhanSuId",innerProps:{mode:t,showSearch:!0,allowClear:!0,filterOption:c.onSelectSearch,onChange:function(e){b(Object(r.a)(e))}},options:m,rules:s||[]});return n?Object(l.b)(c.MyForm,{form:n,labelCol:d||{span:8},wrapperCol:u||{span:16},children:v}):v}},852:function(e,n,t){"use strict";t.d(n,"a",(function(){return o}));t(0);var i=t(6),a=t(211),c=t(17);function o(e){var n=e.name,t=e.label,o=e.onPressEnter,r=e.rules,l=e.disabled,d=e.autoFocus,u=e.classNameItem,s=e.className;return Object(c.b)(i.MyFormItem,{name:n,label:t,rules:r,className:u,children:Object(c.b)(a.a,{autoFocus:d,disabled:l,onPressEnter:o,className:s})})}}}]);