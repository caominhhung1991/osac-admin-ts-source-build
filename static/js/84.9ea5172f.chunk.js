(this["webpackJsonpreact-antd-admin"]=this["webpackJsonpreact-antd-admin"]||[]).push([[84],{1119:function(e,n,t){"use strict";t.r(n);var a=t(13),c=t(10),i=t(0),u=t.n(i),o=t(48),r=t(200),d=t(201),b=t(268),l=t(412),s=t(157),g=t(269),h=t(6),j=t(276),O=t(830),p=t(375),f=t(159),v={getTableColumns:function(){return[Object(c.a)(Object(c.a)({},h.constants.stt),{},{fixed:!1}),p.c.tenNguyenLieu,Object(c.a)(Object(c.a)({},j.a.tenDonViTinh),{},{align:"center"}),f.a.tenNhomNguyenLieu,Object(c.a)(Object(c.a)({},O.a.tenNhaCungCap),{},{fixed:!1,name:"T\xean NCC \u0111\u1eb7t h\xe0ng",width:150}),Object(c.a)(Object(c.a)({},p.c.giaNguyenLieu),{},{name:"Gi\xe1 \u0111\u1eb7t h\xe0ng"}),h.constants.active,h.constants.editRow]},getInputFields:function(){return[]},getExcelFields:function(){return[h.constants.id,p.c.tenNguyenLieu,j.a.tenDonViTinh,f.a.nhomNguyenLieuId,f.a.tenNhomNguyenLieu,O.a.nhaCungCapId,O.a.tenNhaCungCap,p.c.giaNguyenLieu]}},C=t(413),m=t(796),y=t(160),N=t(418),L=t(35),k=t(414),I=t(86),x=t(3),D=t.n(x),T=t(29),w=t(8),S=t(34),R=t(549),E=t(67),V=t(177),A=t(74),F=t(15),M=t(274),P=t(415),z=t(780),X=t(926),B=t(457),G=t(273);var J=t(17),K=s.d.nguyenLieuModal,q=function(){var e,n,t=Object(o.b)(),a=Object(o.c)((function(e){return e.account})).isDev,i=Object(o.c)((function(e){return e.diaDiem})),r=i.diaDiemId,b=i.diaDiems,g=Object(o.c)((function(e){return e.nhaCungCap})),j=g.nhaCungCapId,O=g.nhaCungCaps,p=Object(o.c)((function(e){return e.table})).selectedRows,f=Object(V.useForm)(),v=Object(S.a)(f,1)[0],C=u.a.useMemo((function(){return 0!==((null===p||void 0===p?void 0:p[K])||[]).length&&j}),[p,j]),m=Object(o.c)((function(e){return e.account})).accountData,k=null===m||void 0===m||null===(e=m.paths)||void 0===e||null===(n=e.danhSachNL)||void 0===n?void 0:n.edit;function I(){return(I=Object(w.a)(D.a.mark((function e(){var n,a,c,i,u,o,l,s,g;return D.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(n=(null===b||void 0===b?void 0:b[r])||{},a=n.tenDiaDiem,c=(null===O||void 0===O?void 0:O[j])||{},i=c.tenNhaCungCap,k){e.next=4;break}return e.abrupt("return",Object(L.h)());case 4:if(window.confirm("X\xe1c nh\u1eadn c\u1eadp nh\u1eadt c\xe1c nguy\xean li\xeau th\xe0nh nh\xe0 cung c\u1ea5p ".concat(i," \u0111ang \u0111\u1eb7t h\xe0ng t\u1ea1i \u0111\u1ecba \u0111i\u1ec3m ").concat(a))){e.next=6;break}return e.abrupt("return");case 6:Object(F.l)("giaNguyenLieuTheoDiaDiem"),u=(null===p||void 0===p?void 0:p[K])||[],o=Object(T.a)(u),e.prev=9,o.s();case 11:if((l=o.n()).done){e.next=20;break}return s=l.value,g={id:s.id,nhaCungCapId:j},e.next=16,t(Object(M.c)(g));case 16:g=e.sent,t(Object(B.h)(g,r));case 18:e.next=11;break;case 20:e.next=25;break;case 22:e.prev=22,e.t0=e.catch(9),o.e(e.t0);case 25:return e.prev=25,o.f(),e.finish(25);case 28:t(Object(d.d)({tableId:K,selectedRowKeys:[],selectedRows:[]})),t(Object(B.d)(r)),Object(L.g)();case 31:case"end":return e.stop()}}),e,null,[[9,22,25,28]])})))).apply(this,arguments)}return u.a.useEffect((function(){t(Object(B.d)(r))}),[r]),u.a.useEffect((function(){var e=localStorage.getItem("nhaCungCapId")||"",n=localStorage.getItem("diaDiemId")||"";t(Object(M.a)(e)),t(Object(P.a)(n)),v.setFieldsValue({nhaCungCapId:e,diaDiemId:n})}),[]),Object(J.b)(J.a,{children:Object(J.b)(l.a,{header:Object(J.b)("div",{className:"font-weight-bold",children:Object(J.b)("span",{children:"Th\xf4ng Tin Trang"})}),body:Object(J.c)("div",{className:"form-input-aside",style:{padding:"5px"},children:[Object(J.c)(R.a,{form:v,children:[Object(J.b)(z.a,{isDanhSachNL:!0,onAfterSelect:function(e){v.setFieldsValue({nhaCungCapId:""}),t(Object(M.a)(""))}}),Object(J.b)(X.a,{isAddNew:!0,isTrangQuanLy:!0,diaDiemId:r,onAfterSelect:function(e){console.log(e,"nhaCungCapId")}})]}),Object(J.b)("div",{style:{marginTop:"10px"},children:Object(J.b)(E.a,{disabled:!C,type:"primary",onClick:function(){return I.apply(this,arguments)},children:"C\u1eadp nh\u1eadt nh\xe0 cung c\u1ea5p"})}),a&&Object(J.b)("div",{style:{marginTop:"10px"},children:Object(J.b)("button",{onClick:function(){Object(F.k)(),t(Object(N.k)())},children:"cap nhat gia vs ncc cho dau giay"})}),a&&Object(J.b)("div",{style:{marginTop:"10px"},children:Object(J.b)("button",{onClick:function(){Object(F.k)(),t(Object(N.l)())},children:"cap nhat NCC Thi\xean H\u01b0ng Th\u1ecbnh"})}),a&&Object(J.b)("div",{style:{marginTop:"10px"},children:Object(J.b)("button",{onClick:function(){Object(F.k)(),t(Object(N.n)())},children:"X\xf3a gi\xe1 NL v\xe0 NCC trong nguy\xean li\u1ec7u"})}),a&&Object(J.b)("div",{style:{marginTop:"10px"},children:Object(J.b)("button",{onClick:function(){Object(F.k)(),t(Object(N.j)())},children:"T\u1ed5ng h\u1ee3p nguy\xean li\u1ec7u c\xf3 trong m\xf3n \u0103n"})}),a&&Object(J.b)("div",{style:{marginTop:"10px"},children:Object(J.b)("button",{onClick:function(){Object(F.k)(),t(Object(N.i)())},children:"X\xf3a isConfirm trong danh s\xe1ch NL"})}),a&&Object(J.b)("div",{style:{marginTop:"10px"},children:Object(J.b)("button",{onClick:function(){Object(F.k)(),t(function(){var e=Object(w.a)(D.a.mark((function e(n,t){var a,i,u,o,r,d;return D.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a=t(),i=a.nguyenLieu.nguyenLieus,(new y.a).pathDatas,e.next=5,Object(F.d)(["ingredients"]);case 5:u=e.sent,o=Object.values(i).map((function(e){return n(Object(G.c)(e))})),r=o.filter((function(e){return!(null===e||void 0===e?void 0:e.tenDonViTinh)})),d=r.map((function(e){var t=(null===u||void 0===u?void 0:u[e.id]).quantitative,a="".concat(t).toLowerCase().trim();return n(Object(G.c)(Object(c.a)(Object(c.a)({},e),{},{donViTinhId:a})))})),console.log(d,"nguyenLieuCuList");case 10:case"end":return e.stop()}}),e)})));return function(n,t){return e.apply(this,arguments)}}())},children:"C\u1eadp nh\u1eadt t\xean \u0111\u01a1n v\u1ecb t\xednh"})})]}),footer:Object(J.b)("div",{children:Object(J.b)(E.a,{icon:Object(J.b)(A.a,{}),onClick:function(){return t(Object(h.toggleAside)({tagPageId:s.d.nguyenLieuModal}))},children:"\u0110\xf3ng m\u1edf r\u1ed9ng"})})})})},H=s.d.nguyenLieuModal;n.default=function(){var e,n,t=Object(o.b)(),i=Object(o.c)((function(e){return e.nguyenLieu})),s=i.tabsData,h=i.loading,j=i.pageSize,O=i.nguyenLieus,p=Object(o.c)((function(e){return e.nhaCungCap})).nhaCungCaps,f=Object(o.c)((function(e){return e.danhSachGiaNL})).giaNguyenLieuTheoDiaDiemDatas,x=Object(o.c)((function(e){var n;return null===(n=e.tagsPage)||void 0===n?void 0:n[H]})),D=Object(o.c)((function(e){return e.account})).accountData,T=null===D||void 0===D||null===(e=D.paths)||void 0===e||null===(n=e.danhSachNL)||void 0===n?void 0:n.edit,w=Object(b.a)({Instance:y.a,onPending:N.h,addSelectedId:N.a,isEdit:T});var S=u.a.useMemo((function(){return Object.values(O).reduce((function(e,n){var t=n.id,i=(null===f||void 0===f?void 0:f[t])||{},u=i.tenNhaCungCap,o=i.nhaCungCapId,r=i.giaNguyenLieu;if(r&&!u){var d=(null===p||void 0===p?void 0:p[o])||{};console.log(n.tenNguyenLieu,o,d.tenNhaCungCap)}var b=Object(c.a)(Object(c.a)({},n),{},{nhaCungCapId:o,tenNhaCungCap:u,giaNguyenLieu:r});return Object(c.a)(Object(c.a)({},e),{},Object(a.a)({},t,b))}),{})}),[O,f]);return Object(J.c)("div",{className:"nguyenLieu-page",css:g.a,children:[Object(J.b)(l.b,{className:"tabs",options:s,activeKey:x?"aside":"",onTabClick:function(e){if("add"===e){if(!T)return Object(L.h)();var n=new y.a;t(Object(r.c)({modalId:H,data:n.initData}))}else"aside"===e?t(Object(k.b)({tagPageId:H})):"taiExcel"===e&&t(Object(d.b)({tableId:H,constants:v,fileSheet:"nguyenLieuSheet",fileName:"nguyenLieuName",isDownloadAll:!0,datas:S}))}}),Object(J.c)("div",{className:"tabs-main",style:{marginTop:"10px"},children:[x&&Object(J.b)(q,{}),Object(J.b)("div",{className:"aside-main",children:Object(J.b)(C.a,{constants:v,actions:w,datas:S,loading:h,modalId:H,isEdit:T,isSelection:!0,pagination:!0,pageSize:j,onChange:function(e){t(Object(N.o)(e.pageSize))},expandable:{expandedRowRender:function(e){return Object(J.b)("div",{children:e.id})},expandRowByClick:!0},onCallbackDataSource:function(e){return Object(I.orderBy)(e,["tenNhomNguyenLieu","tenNguyenLieu"])}})})]}),Object(J.b)(m.a,{})]})}}}]);