(this["webpackJsonpreact-antd-admin"]=this["webpackJsonpreact-antd-admin"]||[]).push([[81],{1120:function(e,n,a){"use strict";a.r(n);var t=a(3),c=a.n(t),i=a(10),r=a(8),d=a(0),u=a.n(d),o=a(48),l=a(66),b=a(407),s=a(330),h=a(201),j=a(414),O=a(200),p=a(412),f=a(156),g=a(269),v=a(555),m=a(413),C=a(194),N=a(268),y=a(454),L=a(418),k=a(35),S=a(34),x=a(545),I=a(177),w=a(73),D=a(919),G=a(776),E=a(274),T=a(415),B=a(21);var M=a(16),P=a(17),R=function(e){var n,a=e.dateTimePicker,t=Object(o.b)(),i=Object(o.c)((function(e){return e.account})).isDev,d=Object(o.c)((function(e){return e.danhSachGiaNL})).isCapNhatGiaNL,b=Object(o.c)((function(e){return e.diaDiem})).diaDiemId,s=Object(o.c)((function(e){return e.nhaCungCap})),h=s.nhaCungCaps,O=s.nhaCungCapId,g=Object(o.c)((function(e){return e.nguyenLieu})).nguyenLieus,v=Object(I.useForm)(),m=Object(S.a)(v,1)[0];function N(e,n){return L.apply(this,arguments)}function L(){return(L=Object(r.a)(c.a.mark((function e(n,a){return c.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!n){e.next=9;break}return m.setFieldsValue({diaDiemId:n}),m.setFieldsValue({nhaCungCapId:a}),t(Object(E.a)(a)),t(Object(T.a)(n)),e.next=7,t(Object(y.c)(n,a));case 7:e.next=10;break;case 9:t(Object(y.j)({}));case 10:case"end":return e.stop()}}),e)})))).apply(this,arguments)}return u.a.useEffect((function(){var e=localStorage.getItem("diaDiemId")||"",n=localStorage.getItem("nhaCungCapId")||null;e&&N(e,n)}),[g,h]),Object(P.b)(P.a,{children:Object(P.b)(p.a,{header:Object(P.b)("div",{className:"font-weight-bold",children:Object(P.b)("span",{children:"Th\xf4ng Tin Trang"})}),body:Object(P.c)("div",{className:"form-input-aside",style:{padding:"5px"},children:[Object(P.b)("div",{children:(null===a||void 0===a||null===(n=a.getDayRender)||void 0===n?void 0:n.call(a))||null}),Object(P.c)(x.a,{form:m,children:[Object(P.b)(G.a,{isDanhSachNL:!0,onAfterSelect:function(){var e=Object(r.a)(c.a.mark((function e(n){return c.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t(Object(E.a)("")),e.next=3,N(n,O);case 3:case"end":return e.stop()}}),e)})));return function(n){return e.apply(this,arguments)}}()}),Object(P.b)(D.a,{isAddNew:!0,isTrangQuanLy:!0,diaDiemId:b,onAfterSelect:function(){var e=Object(r.a)(c.a.mark((function e(n){return c.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,N(b,n);case 2:case"end":return e.stop()}}),e)})));return function(n){return e.apply(this,arguments)}}()})]}),Object(P.b)(l.a,{type:d?"primary":"dashed",onClick:function(){t(Object(y.i)(!d))},children:"C\u1eadp nh\u1eadt gi\xe1"}),i&&Object(P.b)("div",{className:"mt-1",children:Object(P.b)("button",{onClick:function(){Object(M.k)(),t(function(){var e=Object(r.a)(c.a.mark((function e(n,a){var t,i,r,d;return c.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:t=a(),i=t.danhSachGiaNL.giaNguyenLieus,r=new C.a,d=[].concat(Object(B.a)(r.pathDatas),["xuongDauGiay"]),Object.values(i).forEach((function(e,n){var a=e.id,t=e.nhaCungCapId,c=e.giaNguyenLieu;(void 0===c?0:c)!==((null===e||void 0===e?void 0:e[t])||0)&&([].concat(Object(B.a)(d),[a]),console.log(e))}));case 5:case"end":return e.stop()}}),e)})));return function(n,a){return e.apply(this,arguments)}}())},children:"C\u1eadp nh\u1eadt l\u1ea1i gi\xe1 NL \u0111\xe3 g\xe1n NCC"})}),i&&Object(P.b)("div",{className:"mt-1",children:Object(P.b)("button",{onClick:function(){Object(M.k)(),t(Object(y.g)())},children:"C\u1eadp nh\u1eadt l\u1ea1i NCC NL b\u1ecb sai"})})]}),footer:Object(P.b)("div",{children:Object(P.b)(l.a,{icon:Object(P.b)(w.a,{}),onClick:function(){t(Object(j.b)({tagPageId:f.d.danhSachGiaNLModal}))},children:"\u0110\xf3ng m\u1edf r\u1ed9ng"})})})})},z=a(533),A=a(791),F=a(85),J=f.d.danhSachGiaNLModal;n.default=function(){var e,n,a,t,d=Object(o.b)(),u=Object(o.c)((function(e){return e.danhSachGiaNL})),S=u.tabsData,x=u.loading,I=u.pageSize,w=u.danhSachGiaNLs,D=u.isCapNhatGiaNL,G=Object(o.c)((function(e){var n;return null===(n=e.tagsPage)||void 0===n?void 0:n[J]})),T=Object(o.c)((function(e){return e.diaDiem})).diaDiemId,B=Object(o.c)((function(e){return e.nhaCungCap})).nhaCungCapId,M=Object(o.c)((function(e){return e.account})).accountData,V=null===M||void 0===M||null===(e=M.paths)||void 0===e||null===(n=e.danhSachGiaNL)||void 0===n?void 0:n.edit,K=(null===M||void 0===M||null===(a=M.paths)||void 0===a||null===(t=a.danhSachGiaNL)||void 0===t?void 0:t.edit)&&D,Q=Object(N.a)({Instance:C.a,onPending:y.e,addSelectedId:y.a,isEdit:K});return Object(P.c)("div",{className:"danhSachGiaNL-page",css:g.a,children:[Object(P.b)(p.b,{className:"tabs",options:S,activeKey:G?"aside":"",onTabClick:function(e){if("add"===e&&K){var n,a;if(!(null===M||void 0===M||null===(n=M.paths)||void 0===n||null===(a=n.danhSachNL)||void 0===a?void 0:a.edit))return Object(k.h)();d(Object(O.c)({modalId:f.d.nguyenLieuModal,data:{}}))}else"aside"===e?d(Object(j.b)({tagPageId:J})):"taiExcel"===e&&d(Object(h.b)({tableId:J,constants:v.a,fileSheet:"danhSachGiaNLSheet",fileName:"danhSachGiaNLName"}))}}),Object(P.c)("div",{className:"tabs-main",style:{marginTop:"10px"},children:[G&&Object(P.b)(R,{}),Object(P.b)("div",{className:"aside-main",children:Object(P.b)(m.a,{isEdit:K,constants:v.a,actions:Q,datas:w,loading:x,modalId:J,isSelection:!0,pagination:!0,pageSize:I,onChange:function(e){d(Object(y.k)(e.pageSize))},inputOptions:{isEdit:K},onBlur:function(e){var n=e.target.value;n=Object(z.a)(n),n=Number(n),d(Object(y.f)(T,B,e.target.name,n))},onCallbackDataSource:function(e){return Object(F.orderBy)(e,["tenNhomNguyenLieu","tenNguyenLieu"])},expandable:{rowExpandable:function(){return V},expandedRowRender:function(e){return Object(P.c)("div",{children:[Object(P.c)("div",{children:[Object(P.b)(l.a,{style:{marginRight:"5px"},icon:Object(P.b)(s.a,{}),onClick:function(){console.log(e),V&&d(Object(O.c)({modalId:f.d.nguyenLieuModal,data:e}))},children:"C\u1eadp nh\u1eadt"}),Object(P.b)(b.a,{checkedChildren:"\u1ea8n nguy\xean li\u1ec7u",unCheckedChildren:"B\u1ecf \u1ea9n nguy\xean li\u1ec7u",checked:e.active,onClick:function(){if(!window.confirm("X\xe1c nh\u1eadn \u1ea9n nguy\xean li\u1ec7u ".concat(e.tenNguyenLieu,"?")))return null;d(Object(L.c)(e))}}),Object(P.b)(l.a,{style:{marginLeft:"5px"},onClick:Object(r.a)(c.a.mark((function n(){var a;return c.a.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return a=Object(i.a)(Object(i.a)({},e),{},{nhaCungCapId:B}),n.next=3,d(Object(E.c)(a));case 3:a=n.sent,d(Object(y.h)(a,T));case 5:case"end":return n.stop()}}),n)}))),children:"B\u1ea5m ch\u1ecdn \u0111\u1ec3 l\u01b0u \u0111\u1eb7t h\xe0ng"})]}),Object(P.c)("div",{className:"mt-1",children:["M\xe3 NL: ",e.id]})]})},expandRowByClick:!0}})})]}),Object(P.b)(A.a,{})]})}}}]);